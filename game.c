#include "game.h"

#include <stdio.h>
#include <stdlib.h>

#include "gba.h"
/* TODO: */
// Include any header files for title screen or exit
// screen images generated by nin10kit. Example for the provided garbage
// image:
#include "images/garbage.h"

/* TODO: */
// Add any additional states you need for your app.
typedef enum
{
  START,
  PLAY,
  WIN,
  LOSE,
} GBAState;

int main(void)
{
  /* TODO: */
  // Manipulate REG_DISPCNT here to set Mode 3. //
  REG_DISPCNT = MODE3 | BG2_ENABLE;
  // Save current and previous state of button input.
  u32 previousButtons = BUTTONS;
  u32 currentButtons = BUTTONS;

  // Load initial game state
  GBAState state = START;

  while (1)
  {
    currentButtons = BUTTONS; // Load the current state of the buttons

    /* TODO: */
    // Manipulate the state machine below as needed //
    // NOTE: Call waitForVBlank() before you draw
    waitForVBlank();
    switch (state)
    {
    case START:

      drawRectDMA(0,0,240,10,MAGENTA);
      drawRectDMA(10,0,10,140,BLUE);
      drawRectDMA(10,230,10,140,RED);
      drawRectDMA(150,0,240,10,MAGENTA);
      drawImageDMA( (HEIGHT/2) - (GARBAGE_HEIGHT/2) ,(WIDTH/2) - (GARBAGE_WIDTH/2), GARBAGE_WIDTH, GARBAGE_HEIGHT, garbage);
      // state = ?
      break;
    case PLAY:

      // state = ?
      break;
    case WIN:

      // state = ?
      break;
    case LOSE:

      // state = ?
      break;
    }

    previousButtons = currentButtons; // Store the current state of the buttons
  }

  UNUSED(previousButtons); // You can remove this once previousButtons is used

  return 0;
}
